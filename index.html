<!DOCTYPE html><html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PlaylistFinder</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/distribute/nouislider.min.css"/>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: white;
      padding: 20px;
      text-align: center;
    }
    select, input, button {
      margin: 8px;
      padding: 8px;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
    }
    button {
      background-color: #1db954;
      color: white;
      cursor: pointer;
    }
    details {
      background: #1e1e1e;
      border-radius: 8px;
      margin-top: 1rem;
      padding: 1rem;
      text-align: left;
    }
    summary {
      cursor: pointer;
      font-size: 1.1rem;
    }
    #genreMenu {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.4rem 1rem;
      max-height: 300px;
    }
    .slider-container {
      margin: 20px auto;
      max-width: 500px;
    }
    .progress {
      width: 80%;
      height: 20px;
      margin: 20px auto;
      background-color: #333;
      border-radius: 10px;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      background-color: #1db954;
      width: 0%;
      transition: width 0.3s;
    }
  </style>
</head>
<body><h1>üéø PlaylistFinder</h1><div style="display: flex; justify-content: center; align-items: center; gap: 10px;">
  <button onclick="login()">üîê Login</button>
  <span id="loginStatus">‚ùå</span>
</div><div style="display: flex; justify-content: center; align-items: center; gap: 10px;">
  <input type="text" placeholder="Link playlist Spotify" id="playlistLink" style="width: 50%;">
  <button onclick="addPlaylistInput()">‚ûï</button>
</div>
<div id="additionalLinks"></div><div>
  <label><input type="radio" name="mode" value="auto" checked> Automatica</label>
  <label><input type="radio" name="mode" value="manual"> Manuale</label>
  <label><input type="radio" name="mode" value="original"> Originale</label>
  <label><input type="radio" name="mode" value="new"> Nuova</label>
</div><div style="margin-top: 10px;">
  <label>Nome: <input type="text" id="playlistName" value="Playlist_1" /></label>
</div><details>
  <summary>Filtri</summary>
  <div>
    <label>Includi parole: <input type="text" id="includeKeywords" placeholder="acoustic, piano..."></label><br>
    <label>Escludi parole: <input type="text" id="excludeKeywords" placeholder="remix, live..."></label><br>
  </div>
  <div class="slider-container">
    <label>Durata (sec): <span id="durationVal"></span></label>
    <div id="durationSlider"></div>
  </div>
  <div class="slider-container">
    <label>Popolarit√†: <span id="popularityVal"></span></label>
    <div id="popularitySlider"></div>
  </div>
  <div>
    <label>Filtra per genere:</label>
    <div id="genreMenu">
      <label><input type="checkbox" value="pop" /> Pop</label>
      <label><input type="checkbox" value="rock" /> Rock</label>
      <label><input type="checkbox" value="hip-hop" /> Hip-Hop</label>
      <label><input type="checkbox" value="edm" /> EDM</label>
      <label><input type="checkbox" value="classical" /> Classica</label>
    </div>
    <label>Generi personalizzati: <input type="text" id="customGenres" placeholder="es: trap, ambient..."></label>
  </div>
</details><div style="margin-top: 20px;">
  <button onclick="startProcessing()">üéØ Crea Playlist</button>
  <button onclick="exportJSON()">üìÖ Scarica</button>
  <input type="file" id="importFile" onchange="importJSON()" />
</div><div class="progress"><div class="progress-bar" id="progressBar"></div></div><script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/distribute/nouislider.min.js"></script><script>
let accessToken = '';
let durationSlider = document.getElementById('durationSlider');
let popularitySlider = document.getElementById('popularitySlider');

noUiSlider.create(durationSlider, {
  start: [0, 3600], connect: true, range: {min: 0, max: 7200},
  tooltips: true, format: {to: v => Math.round(v), from: v => Number(v)}
});
noUiSlider.create(popularitySlider, {
  start: [0, 100], connect: true, range: {min: 0, max: 100},
  tooltips: true, format: {to: v => Math.round(v), from: v => Number(v)}
});

durationSlider.noUiSlider.on('update', v => {
  document.getElementById('durationVal').textContent = `${v[0]} - ${v[1]}`;
});
popularitySlider.noUiSlider.on('update', v => {
  document.getElementById('popularityVal').textContent = `${v[0]} - ${v[1]}`;
});

function login() {
  accessToken = "fake_token"; // Simulazione login
  document.getElementById('loginStatus').textContent = '‚úÖ';
}
function addPlaylistInput() {
  const div = document.createElement("div");
  div.innerHTML = '<input type="text" placeholder="Altro link playlist Spotify" style="width: 50%;">';
  document.getElementById('additionalLinks').appendChild(div);
}
function startProcessing() {
  document.getElementById("progressBar").style.width = "0%";
  let width = 0;
  const interval = setInterval(() => {
    width += 5;
    document.getElementById("progressBar").style.width = width + "%";
    if (width >= 100) clearInterval(interval);
  }, 200);
}
function exportJSON() {
  const data = { test: "esempio" };
  const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "playlist.json";
  a.click();
  URL.revokeObjectURL(url);
}
function importJSON() {
  const fileInput = document.getElementById("importFile");
  const file = fileInput.files[0];
  const reader = new FileReader();
  reader.onload = (e) => {
    const json = JSON.parse(e.target.result);
    console.log("Importato:", json);
  };
  reader.readAsText(file);
}
</script></body>
</html>
