<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PlaylistFinder</title>

  <!-- External CSS -->
  <link rel="stylesheet" href="css/style.css"> <!-- MOD: moved inline CSS to style.css -->

  <!-- External library: SortableJS for drag & drop -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
</head>
<body>
  <!-- Settings Button -->
  <button id="settingsBtn" title="Settings">⚙️</button> <!-- MOD: removed onclick inline, moved to JS -->

  <!-- Sidebar Settings -->
  <div id="sidebarSettings">
    <button class="close-btn">✖️</button> <!-- MOD: removed onclick inline, moved to JS -->
    <h2>Settings</h2>

    <!-- Language Selection -->
    <div>
      <label for="langSelect"><span style="margin-right:6px;">🌐</span>Language:</label>
      <select id="langSelect">
        <option value="it">🇮🇹 Italiano</option>
        <option value="en" selected>🇬🇧 English</option>
        <option value="es">🇪🇸 Español</option>
        <option value="fr">🇫🇷 Français</option>
        <option value="de">🇩🇪 Deutsch</option>
        <option value="pt">🇵🇹 Português</option>
        <option value="ru">🇷🇺 Русский</option>
      </select>
    </div>

    <!-- Theme toggle -->
    <div>
      <button id="themeToggle">🌓 Toggle Theme</button>
    </div>

    <hr>

    <!-- Leaderboard -->
    <div>
      <button id="leaderboardBtn" class="highlight">Leaderboard</button>
    </div>

    <!-- Load local playlist -->
    <div>
      <button id="loadLocalPlaylistBtn" class="highlight">📂 Load Local Playlist</button>
    </div>
  </div>

  <!-- Motivational Quote -->
  <div>
    <label>Motivational Quote:</label>
    <div id="randomQuote"></div>
  </div>

  <!-- Title -->
  <h1>🎧 PlaylistFinder</h1>

  <!-- Spotify Login -->
  <button id="loginBtn">🔐 Login with Spotify</button>
  <span id="loginStatus" class="status-icon">❌ Not Logged In</span>

  <!-- Playlist Name -->
  <div class="playlist-name-container">
    <label for="playlistName" id="playlistLabel"><b>Playlist Name:</b></label>
    <input type="text" id="playlistName" placeholder="Enter playlist name..." />
  </div>

  <!-- Multiple Playlist Links -->
  <div class="inline" id="playlistInputs">
    <input type="text" class="playlist-link" placeholder="Spotify playlist link" />
    <button type="button" id="addPlaylistBtn" class="add-link">➕</button>
  </div>

  <!-- Mode Selector -->
  <div id="modeSelector">
    <label><input type="radio" name="mode" value="auto" checked> Auto</label>
    <label><input type="radio" name="mode" value="manual"> Manual</label>
    <label><input type="radio" name="mode" value="original"> Original</label>
    <label><input type="radio" name="mode" value="filtered"> Filtered</label>
  </div>

  <!-- Advanced Filters -->
  <details>
    <summary>🎚️ Advanced filters</summary>
    <div class="inline">
      <label>Exclude words: <input type="text" id="excludeKeywords" placeholder="remix, live..." /></label>
      <label>Include words: <input type="text" id="includeKeywords" placeholder="acoustic, piano..." /></label>
    </div>

    <!-- Duration Slider -->
    <div class="slider-block">
      <label>Duration (seconds): <span id="durationLabel"></span></label>
      <div class="range-slider" id="durationSlider">
        <div class="range-slider-track"></div>
        <div class="range-slider-progress" id="durationProgress"></div>
        <input type="range" id="durationMin" min="0" max="3600" value="0">
        <input type="range" id="durationMax" min="0" max="3600" value="3600">
      </div>
    </div>

    <!-- Popularity Slider -->
    <div class="slider-block">
      <label>Popularity: <span id="popularityLabel"></span></label>
      <div class="range-slider" id="popularitySlider">
        <div class="range-slider-track"></div>
        <div class="range-slider-progress" id="popularityProgress"></div>
        <input type="range" id="popMin" min="0" max="100" value="0">
        <input type="range" id="popMax" min="0" max="100" value="100">
      </div>
    </div>

    <!-- Genres -->
    <div class="inline">
      <label>Genres:</label>
      <div class="genre-grid" id="genreList"></div>
    </div>

    <!-- Custom Genres -->
    <div class="inline">
      <label>Other: <input type="text" id="customGenres" placeholder="funky, soul..." /></label>
    </div>

    <!-- Presets -->
    <div class="inline">
      <button id="savePresetBtn">💾 Save preset</button>
      <button id="loadPresetBtn">📂 Load preset</button>
    </div>

    <!-- Energy Slider -->
    <div class="slider-block highlight">
      <label>Mood/Energy: <span id="energyLabel"></span></label>
      <div class="range-slider" id="energySlider">
        <div class="range-slider-track"></div>
        <div class="range-slider-progress" id="energyProgress"></div>
        <input type="range" id="energyMin" min="0" max="1" step="0.01" value="0">
        <input type="range" id="energyMax" min="0" max="1" step="0.01" value="1">
      </div>
    </div>
  </details>

  <!-- Main Actions -->
  <div id="mainActions">
    <button id="findTracksBtn">🎯 Find original tracks</button>
    <button id="createManualPlaylist" style="display:none">📥 Create from selection</button>
    <button id="exportCsvBtn">📄 Export CSV</button>
    <button id="exportJsonBtn">🧾 Export JSON</button>
    <button id="exportAppleBtn">🍏 Apple Music</button>
    <button id="exportYouTubeBtn">▶️ YouTube Music</button>
  </div>

  <!-- Progress Bar -->
  <div id="progressBarContainer">
    <div id="progressBar"></div>
    <span id="progressLabel"></span>
  </div>

  <!-- Manual Selection Area -->
  <div id="trackSelection"></div>

  <!-- Share & Stats -->
  <div id="shareStats">
    <button id="shareStatsBtn">🔗 Share / Playlist Stats</button>
    <button id="shareTelegramBtn" class="highlight">Telegram</button>
    <button id="shareWhatsappBtn" class="highlight">WhatsApp</button>
  </div>

  <!-- Fun Quote -->
  <div class="fun-quote" id="funQuote"></div>

  <!-- External JS Files -->
  <script src="js/utils.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/spotify.js"></script>
  <script src="js/filters.js"></script>
  <script src="js/playlist.js"></script>
</body>
</html>
